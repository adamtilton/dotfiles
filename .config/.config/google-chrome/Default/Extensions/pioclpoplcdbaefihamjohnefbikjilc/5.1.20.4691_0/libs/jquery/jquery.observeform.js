(function(e){e.observeform={options:{fieldSelector:"input[type=text],input[type=password],input[type=checkbox],input[type=radio],textarea,select",submitSelector:"input[type=submit]",changeDelay:0,changeKeyboardDelay:0,onChange:null,onSubmit:null,onBlur:null,onKeyUp:null,freezeSubmit:true,debug:false},onChange:function(n,l,m,k){if(k.debug){console.log("ObserveForm onChange handler")}if(k.freezeSubmit){e.observeform.unfreezeSubmit(m,k)}if(typeof k.onChange=="function"){var j=(a(l))?k.changeKeyboardDelay:j;if(j>0){if(c){clearTimeout(c)}c=setTimeout(function(){k.onChange(n,l,m,k)},j)}else{k.onChange(n,l,m,k)}}},onBlur:function(m,k,l,j){if(j.debug){console.log("ObserveForm onBlur handler")}if(typeof j.onBlur=="function"){j.onBlur(m,k,l,j)}},onKeyUp:function(m,k,l,j){if(j.debug){console.log("ObserveForm onKeyUp handler")}if(typeof j.onKeyUp=="function"){j.onKeyUp(m,k,l,j)}},onSubmit:function(n,l,m,k){if(k.debug){console.log("ObserveForm onSubmit handler")}var j=false;if(typeof k.onSubmit=="function"){j=k.onSubmit(n,l,m,k)}else{j=true}if(k.freezeSubmit&&j){e.observeform.freezeSubmit(m,k)}return j},freezeSubmit:function(k,j){if(j.debug){console.log("ObserveForm freezeSubmit")}k.find(j.submitSelector).attr("disabled",true)},unfreezeSubmit:function(k,j){if(j.debug){console.log("ObserveForm unfreezeSubmit")}k.find(j.submitSelector).attr("disabled",false)},controlChars:{9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pauseBreak",20:"capsLock",27:"escape",33:"pageUp",34:"pageDown",35:"end",36:"home",37:"leftArrow",38:"upArrow",39:"rightArrow",40:"downArrow",91:"leftWindowKey",92:"rightWindowKey",93:"selectKey",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numLock",145:"scrollLock"}};e.fn.observeform=function(j){return this.each(function(k,l){if(l.tagName=="FORM"){f(e(l),j)}})};var i={};var c=null;function f(k,j){if(e.observeform.options.debug){console.log("ObserveForm initializing")}d(j);if(i.debug){console.dir(k.get(0))}h(k,i);if(i.freezeSubmit){if(i.debug){console.log("ObserveForm initial freezing of submit controls")}e.observeform.freezeSubmit(k,i)}}function d(j){if(e.observeform.options.debug){console.log("ObserveForm initalizing options: "+JSON.stringify(j))}if(typeof j=="object"&&j!=null){i=e.extend({},e.observeform.options,j)}else{i=e.extend({},e.observeform.options)}if(i.debug){console.log(">>> Options: "+JSON.stringify(i))}return i}function h(m,l){if(l.debug){console.log("ObserveForm intializing inputs")}var j=m.find(l.fieldSelector);var k=m.find(l.submitSelector);if(l.debug){console.log("ObserveForm binding "+j.length+" fields")}if(j.length>0){j.each(function(p,q){var n=e(q);var o=g(n);if(l.debug){console.log("Binding "+n.attr("tagName")+"#"+n.attr("type")+"#"+n.attr("name")+" to "+o+" handler")}n.bind(o,function(r){if(r&&typeof r.keyCode=="number"&&b(r.keyCode)){if(l.debug){console.log("Ignoring change due to keyCode: "+r.keyCode+" ("+e.observeform.controlChars[r.keyCode]+")")}return}e.observeform.onChange(r,n,m,l)});if(a(n)){if(l.debug){console.log("Binding "+n.attr("tagName")+" to  dedicated keyup handler")}n.bind("keyup",function(r){e.observeform.onKeyUp(r,n,m,l)})}if(l.debug){console.log("Binding "+n.attr("tagName")+" to dedicated blur handler")}n.bind("blur",function(r){e.observeform.onBlur(r,n,m,l)})})}if(l.debug){console.log("ObserveForm binding "+k.length+" submit controls")}if(k.length>0){k.each(function(o,p){var n=e(p);if(n.attr("type").toLowerCase()!="submit"){n.click(function(q){return e.observeform.onSubmit(q,n,m,l)})}})}if(l.debug){console.log("ObserveForm binding form's onSubmit handler")}m.submit(function(n){if(l.debug){console.log("ObserveForm handling onSubmit")}return e.observeform.onSubmit(n,null,m,l)})}function a(k){if(k){var j=k.attr("tagName");var l=k.attr("type");if(j=="TEXTAREA"||(j=="INPUT"&&(l=="text"||l=="password"))){return true}}return false}function b(j){if(typeof j=="number"){return(typeof e.observeform.controlChars[j]!="undefined")}return false}function g(j){if(a(j)){return"keyup"}else{return"change"}}})(jQuery);